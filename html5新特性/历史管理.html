<!DOCTYPE html> 
<html>
<head>
	<meta charset="utf-8">
	<title>html5新特性</title>
	<style>
		
	</style>
</head>
<body>
	<div id="box" data-title-js="自定义">1121</div>
	<input id="btn" type="button" value="切换">
	<script>

	/* 触发历史管理 几种机制：
	*1.通过跳转页面  
	*2.hash值  通过对网址后面加上hash值，实现页面历史管理
 	*3.pushState
 	*/  
		window.onload = function(){
			var oDiv = document.getElementById('box');
			var oBtn = document.getElementById('btn');

			var json = {};	//首先进行json声明
			btn.onclick = function(){
				var arr = randomData(30,6);
				var num = Math.random();
				json[num] = arr;

			//将随机值存入到历史管理中,实现
				window.location.hash = num;

				oDiv.innerHTML = arr;       //   是innerHTML
			}

		window.onhashchange = function(){
				//当 hash值改变时就触发
				//hash值后面有#号，截取字符串
				n//将提取后的字符串赋值给 div的值
				oDiv.innerHTML = json[window.location.hash.substring(1)];
		}

			function randomData(iAll,iNow){
				var arr = [];
				var newArr = [];
				for(var i=0;i<iAll;i++){
					arr.push(i);
				}
			for(var i=0;i<iNow;i++){
			newArr.push(arr.splice(Math.floor(Math.random()*arr.length),1));	//从数组的第几位开始截取，截取一位
				}				//并向下进行取整
				return newArr;
			}
		
	}
	</script>
</body>
</html>